{% extends 'layout/header.html' %}
{% load static%}
<!DOCTYPE html>
{% block content %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Aprendices - Listado</title>
    <link rel="stylesheet" href="{% static 'css/lista_aprendices.css' %}">
    <script src="{% static 'js/lista_aprendices.js' %}" defer></script>
</head>
<body>
    <!-- Header -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h2>Gesti√≥n de Aprendices</h2>
            <p>Administra la informaci√≥n de los aprendices, programas de formaci√≥n, horarios y datos de contacto.</p>
        </div>

        <!-- Actions Bar -->
        <div class="actions-bar">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Buscar aprendices..." id="searchInput">
            </div>
            <a class="btn-primary volver" href="/home">
                <span>‚Üê</span>
                Volver
            </a>
            <button class="btn-primary" onclick="openModal()">
                <span>+</span>
                Nuevo Aprendiz
            </button>
        </div>

        <!-- Aprendices Grid -->
        <div class="aprendices-grid" id="aprendicesGrid">
            {% if cantidad != 0 %}
            {% for dato in datos %}
            <div class="aprendiz-card">
                <div class="aprendiz-header">
                        <div class="aprendiz-avatar">
                            avatar
                        </div>
                        <div class="aprendiz-info">
                            <h3>{{dato.nombres}} {{dato.apellidos}}</h3>
                            <p>{{dato.tipo_documento}}: {{dato.numero_documento}}</p>
                        </div>
                    </div>
                    <div class="aprendiz-details">
                        <div class="detail-row">
                            <span class="detail-label">Programa:</span>
                            <span class="detail-value">{{dato.formacion}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Ficha:</span>
                            <span class="detail-value">{{dato.ficha}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Tel√©fono:</span>
                            <span class="detail-value">{{dato.telefono}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Estado:</span>
                            <span class="status-badge">{{dato.estado}}</span>
                        </div>
                    </div>
                    <div class="aprendiz-actions">
                        <form action="">
                            {% csrf_token %}
                            <button class="btn-action btn-edit">‚úèÔ∏è Editar</button>
                        </form>
                        <button class="btn-action btn-delete btn-abrir-modal-delete"
                                data-url="{% url 'eliminar_aprendiz' dato.numero_documento %}"
                                data-nombre="{{dato.nombres}} {{dato.apellidos}}"
                                onclick="OpenDelete(event)">
                                üóëÔ∏è Eliminar
                        </button>
                    </div>
                </div>
                {% endfor %} {% else %}
                <div class="div-vacio">
                    <h2 class="vacio">{{vacio}}</h2>
                </div>
                {% endif %}

                <!--Modal para eliminar aprendiz-->
                <div class="modal-overlay eliminar" id="eliminar" onclick="Close(event)">
                    <div class="logout-modal">
                        <div class="modal-header">
                            <div class="modal-icon">üö™</div>
                                <h2 class="modal-title">Eliminar aprendiz?</h2>
                                <p class="modal-subtitle" id="texto"></p>
                            </div>
                            <div class="modal-body">
                            <div class="modal-actions">
                                <button class="modal-btn btn-cancel" onclick="cancel()">
                                    Cancelar
                                </button>
                                <form action="" id="formulario" method="POST">
                                    {% csrf_token %}
                                    <button class="modal-btn btn-confirm">Eliminar</button>
                                </form>
                            </div>
                        </div>  
                    </div>
                </div>  
            </div>
            </div>
        
        <!-- Modal para Agregar/Editar Aprendiz -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header-new">
                <h3 id="modalTitle">Nuevo Aprendiz</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="aprendizForm" method="POST">

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Nombres</label>
                            {% csrf_token %}
                            {{nombres}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Apellidos</label>
                            {% csrf_token %}
                            {{apellidos}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Documento</label>
                            {% csrf_token %}
                            {{documento}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Tipo Documento</label>
                            {% csrf_token %}
                            {{tipo_documento}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Tel√©fono</label>
                            {% csrf_token %}
                            {{telefono}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            {% csrf_token %}
                            {{email}}
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">Programa de Formaci√≥n</label>
                            {% csrf_token %}
                            {{formaciones}}
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">Ficha</label>
                            {% csrf_token %}
                            {{ficha}}
                        </div>
                        <p>{{error}}</p>
                    </div>
                    <button type="button" class="btn-secondary" onclick="closeModal(event)">Cancelar</button>
                    <button type="submit" class="btn-primary" >Guardar</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
{% endblock %}

